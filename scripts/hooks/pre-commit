#!/bin/sh
# Custom pre-commit hook: format + beads sync
# Install: cp scripts/hooks/pre-commit .git/hooks/ && chmod +x .git/hooks/pre-commit

set -e

# 1. Auto-format Rust code
echo "âœ¨ Formatting code..."
cargo fmt --all

# 2. Stage any formatting changes
git add -u '*.rs' 2>/dev/null || true

# 3. Run bd sync (beads)
if command -v bd >/dev/null 2>&1; then
    exec bd hooks run pre-commit "$@"
fi
